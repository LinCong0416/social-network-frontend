{"ast":null,"code":"import _defineProperty from\"/Users/Lin/Documents/GitHub/social-network-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/Lin/Documents/GitHub/social-network-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/Lin/Documents/GitHub/social-network-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/Lin/Documents/GitHub/social-network-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/Lin/Documents/GitHub/social-network-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{Component}from'react';import{Redirect}from'react-router-dom';import{signin,authenticate}from'../auth';var Signin=/*#__PURE__*/function(_Component){_inherits(Signin,_Component);var _super=_createSuper(Signin);function Signin(){var _this;_classCallCheck(this,Signin);_this=_super.call(this);_this.signinForm=function(email,password){return/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-muted\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{onChange:_this.handleChange(\"email\"),type:\"email\",className:\"form-control\",value:email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-muted\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{onChange:_this.handleChange(\"password\"),type:\"password\",className:\"form-control\",value:password})]}),/*#__PURE__*/_jsx(\"button\",{onClick:_this.clickSubmit,className:\"btn btn-raised btn-primary\",children:\"Submit\"})]});};_this.handleChange=function(name){return function(event){_this.setState({error:\"\"});_this.setState(_defineProperty({},name,event.target.value));};};_this.clickSubmit=function(event){event.preventDefault();_this.setState({loading:true});var _this$state=_this.state,email=_this$state.email,password=_this$state.password;var user={email:email,password:password};//console.log(user);\nsignin(user).then(function(data){if(data.error){_this.setState({error:data.error,loading:false});}else{//authenticate\nauthenticate(data,function(){_this.setState({redirectToReferer:true});});}});};_this.state={email:\"\",password:\"\",error:\"\",redirectToReferer:false,loading:false};return _this;}_createClass(Signin,[{key:\"render\",value:function render(){var _this$state2=this.state,email=_this$state2.email,password=_this$state2.password,error=_this$state2.error,redirectToReferer=_this$state2.redirectToReferer,loading=_this$state2.loading;if(redirectToReferer){return/*#__PURE__*/_jsx(Redirect,{to:\"/\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mt-5 mb-5\",children:\"Signin\"}),/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",style:{display:error?\"\":\"none\"},children:error}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"jumbotron text-center\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Loading...\"})}):\"\",this.signinForm(email,password)]});}}]);return Signin;}(Component);export default Signin;","map":{"version":3,"sources":["/Users/Lin/Documents/GitHub/social-network-frontend/src/user/Signin.js"],"names":["React","Component","Redirect","signin","authenticate","Signin","signinForm","email","password","handleChange","clickSubmit","name","event","setState","error","target","value","preventDefault","loading","state","user","then","data","redirectToReferer","display"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {Redirect} from 'react-router-dom';\nimport {signin, authenticate} from '../auth';\n\nclass Signin extends Component {\n    constructor() {\n        super();\n        this.state = {\n            email: \"\",\n            password: \"\",\n            error: \"\",\n            redirectToReferer:false,\n            loading:false\n        };\n    }\n    signinForm = (email, password) => (\n        <form>\n            <div className=\"form-group\">\n                <label className=\"text-muted\">Email</label>\n                <input onChange={this.handleChange(\"email\")}\n                       type=\"email\"\n                       className=\"form-control\"\n                       value={email}\n                />\n            </div>\n            <div className=\"form-group\">\n                <label className=\"text-muted\">Password</label>\n                <input onChange={this.handleChange(\"password\")}\n                       type=\"password\"\n                       className=\"form-control\"\n                       value={password}\n                />\n            </div>\n            <button onClick={this.clickSubmit} className=\"btn btn-raised btn-primary\">\n                Submit\n            </button>\n        </form>\n    )\n\n    handleChange = (name) => (event) => {\n        this.setState({error:\"\"})\n        this.setState({[name] : event.target.value});\n    };\n\n\n\n    clickSubmit = event => {\n        event.preventDefault();\n        this.setState({loading:true})\n        const {email, password} = this.state;\n        const user = {\n            email,\n            password\n        };\n        //console.log(user);\n        signin(user)\n            .then(data => {\n                if (data.error) {\n                    this.setState({error: data.error, loading:false});\n                } else {\n                    //authenticate\n                    authenticate(data, () => {\n                        this.setState({redirectToReferer: true})\n                    })\n                }\n            })\n    }\n\n\n    render(){\n        const {email, password, error, redirectToReferer,loading} = this.state;\n        if (redirectToReferer) {\n            return <Redirect to=\"/\" />\n        }\n        return (\n            <div className=\"container\">\n                <h2 className=\"mt-5 mb-5\">Signin</h2>\n                <div className=\"alert alert-danger\"\n                     style={{display:error ? \"\" : \"none\"}}\n                >\n                    {error}\n                </div>\n\n                {loading ? (\n                    <div className=\"jumbotron text-center\">\n                        <h2>Loading...</h2>\n                    </div>\n                ): (\n                    \"\"\n                )}\n\n                {this.signinForm(email, password)}\n            </div>\n        )\n    }\n}\n\nexport default Signin;"]},"metadata":{},"sourceType":"module"}